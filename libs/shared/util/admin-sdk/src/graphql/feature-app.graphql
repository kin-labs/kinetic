fragment AppDetails on App {
  id
  createdAt
  updatedAt
  index
  name
  webhookEventUrl
  webhookSecret
  webhookVerifyUrl
}

fragment AppTransactionDetails on AppTransaction {
  id
  createdAt
  updatedAt
  amount
  destination
  errors
  feePayer
  mint
  processingDuration
  signature
  solanaDuration
  solanaEnd
  solanaStart
  source
  status
  totalDuration
}

fragment AppUserDetails on AppUser {
  id
  createdAt
  updatedAt
  role
  app {
    ...AppDetails
  }
  user {
    ...UserDetails
  }
}

fragment AppWebhookIncomingDetails on AppWebhookIncoming {
  id
  createdAt
  updatedAt
  headers
  payload
  type
}

mutation CreateApp($input: AppCreateInput!) {
  created: createApp(input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
    wallet {
      ...WalletDetails
    }
  }
}

mutation DeleteApp($appId: String!) {
  deleted: deleteApp(appId: $appId) {
    ...AppDetails
  }
}

mutation UpdateApp($appId: String!, $input: AppUpdateInput!) {
  updated: updateApp(appId: $appId, input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
    wallet {
      ...WalletDetails
    }
  }
}

mutation AppUserAdd($appId: String!, $input: AppUserAddInput!) {
  item: appUserAdd(appId: $appId, input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
  }
}

mutation AppUserRemove($appId: String!, $input: AppUserRemoveInput!) {
  item: appUserRemove(appId: $appId, input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
  }
}

mutation AppUserUpdateRole($appId: String!, $input: AppUserUpdateRoleInput!) {
  item: appUserUpdateRole(appId: $appId, input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
  }
}

mutation AppWalletAdd($appId: String!, $walletId: String!) {
  item: appWalletAdd(appId: $appId, walletId: $walletId) {
    ...AppDetails
    wallet {
      ...WalletDetails
    }
  }
}

mutation AppWalletRemove($appId: String!, $walletId: String!) {
  item: appWalletRemove(appId: $appId, walletId: $walletId) {
    ...AppDetails
    wallet {
      ...WalletDetails
    }
  }
}

query App($appId: String!) {
  item: app(appId: $appId) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
    wallet {
      ...WalletDetails
    }
  }
}

query AppTransaction($appId: String!, $appTransactionId: String!) {
  item: appTransaction(appId: $appId, appTransactionId: $appTransactionId) {
    ...AppTransactionDetails
  }
}

query AppTransactions($appId: String!) {
  items: appTransactions(appId: $appId) {
    ...AppTransactionDetails
  }
}

query AppWebhookIncoming($appId: String!, $appWebhookIncomingId: String!) {
  item: appWebhookIncoming(appId: $appId, appWebhookIncomingId: $appWebhookIncomingId) {
    ...AppWebhookIncomingDetails
  }
}

query AppWebhooksIncoming($appId: String!) {
  items: appWebhooksIncoming(appId: $appId) {
    ...AppWebhookIncomingDetails
  }
}

query Apps {
  items: apps {
    ...AppDetails
    wallet {
      ...WalletDetails
    }
  }
}
