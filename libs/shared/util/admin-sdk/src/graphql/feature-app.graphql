fragment AppDetails on App {
  id
  createdAt
  updatedAt
  index
  name
}

fragment AppEnvDetails on AppEnv {
  id
  createdAt
  updatedAt
  app {
    id
    createdAt
    updatedAt
    index
    name
  }
  cluster {
    ...ClusterDetails
  }
  mints {
    ...AppMintDetails
  }
  name
  webhookAcceptIncoming
  webhookEventEnabled
  webhookEventUrl
  webhookSecret
  webhookVerifyEnabled
  webhookVerifyUrl
}

fragment AppMintDetails on AppMint {
  id
  createdAt
  updatedAt
  mint {
    ...MintDetails
  }
  wallet {
    ...WalletDetails
  }
}

fragment AppTransactionDetails on AppTransaction {
  id
  createdAt
  updatedAt
  amount
  destination
  errors {
    ...AppTransactionErrorDetails
  }
  feePayer
  mint
  processingDuration
  referenceId
  referenceType
  signature
  solanaCommittedDuration
  solanaFinalized
  solanaFinalizedDuration
  solanaCommitted
  solanaStart
  solanaTransaction
  source
  status
  totalDuration
  webhookEventDuration
  webhookEventEnd
  webhookEventStart
  webhookVerifyDuration
  webhookVerifyEnd
  webhookVerifyStart
}

fragment AppTransactionErrorDetails on AppTransactionError {
  id
  message
  type
  instruction
}

fragment AppUserDetails on AppUser {
  id
  createdAt
  updatedAt
  role
  app {
    ...AppDetails
  }
  user {
    ...UserDetails
  }
}

fragment AppWebhookDetails on AppWebhook {
  id
  createdAt
  updatedAt
  direction
  headers
  payload
  responseError
  responsePayload
  responseStatus
  type
}

mutation AdminCreateApp($input: AppCreateInput!) {
  created: adminCreateApp(input: $input) {
    ...AppDetails
    envs {
      ...AppEnvDetails
      wallets {
        ...WalletDetails
      }
    }
    users {
      ...AppUserDetails
    }
  }
}

mutation AdminDeleteApp($appId: String!) {
  deleted: adminDeleteApp(appId: $appId) {
    ...AppDetails
  }
}

mutation UpdateApp($appId: String!, $input: AppUpdateInput!) {
  updated: updateApp(appId: $appId, input: $input) {
    ...AppDetails
    envs {
      ...AppEnvDetails
      wallets {
        ...WalletDetails
      }
    }
    users {
      ...AppUserDetails
    }
  }
}

mutation UpdateAppEnv($appId: String!, $appEnvId: String!, $input: AppEnvUpdateInput!) {
  updated: updateAppEnv(appId: $appId, appEnvId: $appEnvId, input: $input) {
    ...AppEnvDetails
    wallets {
      ...WalletDetails
    }
  }
}

mutation AppUserAdd($appId: String!, $input: AppUserAddInput!) {
  item: appUserAdd(appId: $appId, input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
  }
}

mutation AppUserRemove($appId: String!, $input: AppUserRemoveInput!) {
  item: appUserRemove(appId: $appId, input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
  }
}

mutation AppUserUpdateRole($appId: String!, $input: AppUserUpdateRoleInput!) {
  item: appUserUpdateRole(appId: $appId, input: $input) {
    ...AppDetails
    users {
      ...AppUserDetails
    }
  }
}

mutation AppEnvWalletAdd($appId: String!, $appEnvId: String!, $walletId: String!) {
  item: appEnvWalletAdd(appId: $appId, appEnvId: $appEnvId, walletId: $walletId) {
    ...AppEnvDetails
    wallets {
      ...WalletDetails
    }
  }
}

mutation AppEnvWalletRemove($appId: String!, $appEnvId: String!, $walletId: String!) {
  item: appEnvWalletRemove(appId: $appId, appEnvId: $appEnvId, walletId: $walletId) {
    ...AppEnvDetails
    wallets {
      ...WalletDetails
    }
  }
}

query AdminApp($appId: String!) {
  item: adminApp(appId: $appId) {
    ...AppDetails
    envs {
      ...AppEnvDetails
      wallets {
        ...WalletDetails
      }
    }
    users {
      ...AppUserDetails
    }
  }
}

query UserAppTransaction($appId: String!, $appEnvId: String!, $appTransactionId: String!) {
  item: userAppTransaction(appId: $appId, appEnvId: $appEnvId, appTransactionId: $appTransactionId) {
    ...AppTransactionDetails
  }
}

query UserAppTransactions($appId: String!, $appEnvId: String!, $input: AppTransactionListInput) {
  items: userAppTransactions(appId: $appId, appEnvId: $appEnvId, input: $input) {
    ...AppTransactionDetails
  }
}

query UserAppWebhook($appId: String!, $appWebhookId: String!) {
  item: userAppWebhook(appId: $appId, appWebhookId: $appWebhookId) {
    ...AppWebhookDetails
  }
}

query UserAppWebhooks($appId: String!, $appEnvId: String!) {
  items: userAppWebhooks(appId: $appId, appEnvId: $appEnvId) {
    ...AppWebhookDetails
  }
}

query AdminApps {
  items: adminApps {
    ...AppDetails
    envs {
      ...AppEnvDetails
    }
  }
}

query UserApps {
  items: userApps {
    ...AppDetails
    envs {
      ...AppEnvDetails
    }
  }
}

query UserApp($appId: String!) {
  item: userApp(appId: $appId) {
    ...AppDetails
    envs {
      ...AppEnvDetails
      wallets {
        ...WalletDetails
      }
    }
    users {
      ...AppUserDetails
    }
  }
  role: userAppRole(appId: $appId)
}

query UserAppEnv($appId: String!, $appEnvId: String!) {
  item: userAppEnv(appId: $appId, appEnvId: $appEnvId) {
    ...AppEnvDetails
    wallets {
      ...WalletDetails
    }
  }
}
